<!-- <div class="d-flex flex-column" style="gap: 12px;padding: 100px;">
  <app-user-card *ngFor="let scenario of scenarios" [scenario]="scenario"></app-user-card>
</div>
<div #background style="position: absolute; width: 100%; height: 200%; z-index: -100000;background-size: 256px;"></div> -->

<div class="d-flex w-100 h-100 flex-column justify-content-between" >
  <div #stats class="hud stats">
    <div class="container-fluid">
      <div class="row">
        <app-progress-bar class="col-12" color="#505ccc" [partCount]="24" [progress]="15"></app-progress-bar>
        <app-progress-bar class="col-4" color="darkred" [partCount]="4" [progress]="3"></app-progress-bar>
        <app-progress-bar class="col-8" style="padding-left: 12px;" color="darkgreen" [partCount]="12" [progress]="1"></app-progress-bar>
      </div>
    </div>
  </div>

  <div #scrollContainer class="d-flex main content"
    class="d-flex main content"
    [class.grabbing]="isDragging"
    (mousedown)="onMouseDown($event)"
    (mousemove)="onMouseMove($event)"
    (mouseup)="onMouseUp()">

  <div class="d-flex" style="overflow: auto;">
    
    <div>
      <app-character
        style="position: absolute; z-index: 100;"
        [style.left.px]="(posX * (width + margin)) + (posY % 2 * (width / 2)) + (width / 2) - (13)"
        [style.top.px]="(posY * (height * 0.75 + margin)) + (height / 2) - (42)">
      </app-character>
      <app-tile *ngFor="let tile of tiles"
        style="position: absolute;"
        [style.left.px]="(tile.x * (width + margin)) + (tile.y % 2 * (width / 2))"
        [style.top.px]="(tile.y * (height * 0.75 + margin))"
        [color]="tile.color"
        [x]="tile.x"
        [y]="tile.y"
        [class]="tile.class"
        [display]="tile.display"
        [height]="height"
        [selected]="selectedStart?.x === tile.x && selectedStart?.y === tile.y"
        [endSelected]="selectedEnd?.x === tile.x && selectedEnd?.y === tile.y"
        [inPath]="isInPath(tile.x, tile.y)"
        (tileClicked)="onTileClicked($event)">
      </app-tile>
    </div>

  </div>
<div class="tabs">
  <div #tab [title]="howToPlay">Jak grać?</div>

  <div *ngFor="let tab of tabs" #tab (click)="openModal()">{{tab}}</div>
</div>
<div #footer class="hud footer d-flex justify-content-between align-items-center">
  <div>Postać</div>
  <div style="width: 50%;" class="d-flex">
    <img width="32" src="./../assets/office.png">
    <div>
      <app-progress-bar class="balance w-100" color="yellow" [partCount]="6" [progress]="3"></app-progress-bar>
    </div>
    <img width="32" src="./../assets/family.png">
  </div>
  <div #endTurn class="endTurn">Zakończ turę</div>
</div>

<!-- Modal -->
<div class="modal-backdrop" [hidden]="!isModalOpen" (click)="closeModal()">
  <div class="modal-window" #finance (click)="$event.stopPropagation()">
    <h2>Finanse</h2>
    <hr />

    <!-- Saldo -->
    <div class="finance-summary">
      <p><strong>Saldo konta:</strong> <span>{{ player.saldo | number:'1.0-2' }}</span> zł</p>
      <p><strong>Pensja brutto:</strong> {{ player.salaryBrutto | number:'1.0-2' }} zł / msc</p>
      <p><strong>Na rękę:</strong> {{ player.salaryNetto | number:'1.0-2' }} zł / msc</p>
    </div>

    <hr />

    <!-- Składki ZUS -->
    <h3>Składki ZUS</h3>
    <table class="finance-table">
      <thead>
        <tr>
          <th>Rodzaj składki</th>
          <th>Kwota (zł)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Emerytalna</td>
          <td>{{ player.zus.emerytalna | number:'1.0-2' }}</td>
        </tr>
        <tr>
          <td>Rentowa</td>
          <td>{{ player.zus.rentowa | number:'1.0-2' }}</td>
        </tr>
        <tr>
          <td>Chorobowa</td>
          <td>{{ player.zus.chorobowa | number:'1.0-2' }}</td>
        </tr>
        <tr>
          <td>Zdrowotna</td>
          <td>{{ player.zus.zdrowotna | number:'1.0-2' }}</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <th>Razem składki ZUS</th>
          <th>{{ player.zus.razem | number:'1.0-2' }}</th>
        </tr>
      </tfoot>
    </table>

    <hr />

    <!-- Wydatki -->
    <h3>Wydatki stałe</h3>
    <p><strong>Miesięczne wydatki:</strong> {{ player.wydatki_stale | number:'1.0-2' }} zł</p>

    <hr />

    <!-- Podsumowanie -->
    <h3>Podsumowanie</h3>
    <p><strong>Wolne środki / msc:</strong>
      <span [ngClass]="{'negative': player.salaryNetto - player.wydatki_stale < 0}">
        {{ player.salaryNetto - player.wydatki_stale | number:'1.0-2' }} zł
      </span>
    </p>

    <div class="modal-actions">
      <button (click)="closeModal()">Zamknij</button>
    </div>
  </div>
</div>

